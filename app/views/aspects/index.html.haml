-#   Copyright (c) 2010, Diaspora Inc.  This file is
-#   licensed under the Affero General Public License version 3 or later.  See
-#   the COPYRIGHT file.


- content_for :head do
  = include_javascripts :home

.span-15.append-2
  /= render 'aspects/no_contacts_message', :aspect => @aspect, :contact_count => @contacts.count
  /= render 'aspects/no_posts_message', :post_count => @post_hashes.length, :contact_count => @contacts.count

  #aspect_stream_container
    = render 'aspect_stream',
      :aspect => @aspect,
      :aspect_ids => @aspect_ids,
      :post_hashes => @post_hashes

.span-7.last
  = owner_image_tag
  %h3{:style => "position:relative;display:inline-block;margin-left:12px;top:-8px;"}
    = current_user.name
    .description
      = link_to current_user.diaspora_handle, person_path(current_user.person)
      /= info_text(t('.handle_explanation'))

  %hr

  - if @request_count > 0
    #new_request_pane{:class => "everyone"}
      %h1.new_request{:style => 'text-align:center'}
        = new_request_link(@request_count)

  #left_pane
    .section.aspect_listings
      %h4
        = t('_aspects')
        = link_to @all_aspects.count, aspects_manage_path

      %ul
        - for a_hash in @aspect_hashes
          = render :partial => 'aspects/aspect', :locals => a_hash

    .section.contact_pictures
      %h4
        = t('_contacts')
        = link_to @contact_hashes.count, '#'

      - for contact in @contact_hashes
        = person_image_link(contact[:person])

      - if @contacts.count == 0
        %h4
          = t('.no_contacts')
        = form_tag(people_path, :method => 'get') do
          = text_field_tag 'q', nil, :placeholder => t('search'), :type => 'search', :results => 5

    .section
      %h4= t('shared.invitations.invites')
      = render "shared/invitations", :invites => @invites

